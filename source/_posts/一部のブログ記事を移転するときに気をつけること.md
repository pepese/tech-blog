---
title: 一部のブログ記事を移転するときに気をつけること
date: 2017-05-11 21:47:31
tags:
- SEO
- JavaScript
- はてなブログ
id: move-article
---

筆者は「はてなブログ」を使っているが、諸事情により一部の記事を本ブログへ移転している。  
その際、元の記事を残しておくと、内容が重複することからSEO的によろしく無い。
よろしくない理由は以下の通り。

- 重複コンテンツは同時に検索結果に表示されない
- 被リンク評価が分散する

ここでは、「はてなブログ」の記事を別のブログへ移転する方法について記載する。

<!-- more -->

一般的にブログを引っ越しする際には以下のようなことを実施する。

- HTTPステータスコード301でリダイレクトさせる
- headタグ内に `link rel="canonical"` を設置する
  - `<link rel="canonical" href="[移転先のURL]">`

ここではブログ全体を移転せず一部の記事のみを移転する方法を記載する。  
前提は以下。

- ブログ全体ではなく、一部の記事のみを移転する
- 記事の移転をスムーズにするために、閲覧者・検索エンジンに教えてあげる
- 元の記事は「はてなブログ」を使用している
- Google検索エンジンは簡単なJavaScriptであれば理解してくれる

という訳で、移転元の記事に「 **`link rel="canonical"` を付与** しつつ **移転先の記事へリダイレクト** するJavaScript」を埋め込む。  
最初に「はてなブログ」の管理画面の「設定」->「詳細設定」->「headに要素を追加」へ `` を追加しておく。  
その後以下のスクリプトを記事へ貼り付ける。

```html
<p>本記事は移転しました。</p>
<p>約3秒後にリダイレクトします。</p>
<p>リダイレクトしない場合は<a href="[リダイレクト先のURL]">ここ</a>をクリックしてください。</p>
<script type="text/javascript" language="javascript">
<!--
  // 新url
  var url = "[リダイレクト先のURL]";

  // link rel="canonical" の変更
  // 「はてなブログ」ではheadタグの最初のlinkタグに以下がある
  // <link rel="canonical" href="xxx"/>
  var link = document.getElementsByTagName("link")[0];
  link.href = url;

  // リダイレクト
  setTimeout("redirect()", 3000);　// 3 sec
  function redirect(){
    location.href = url;
  }
-->
</script>
```
